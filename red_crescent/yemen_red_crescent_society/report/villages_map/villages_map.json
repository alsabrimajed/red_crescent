{
 "add_total_row": 0,
 "add_translate_data": 0,
 "columns": [],
 "creation": "2025-08-14 08:49:03.140919",
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [
  {
   "fieldname": "district",
   "fieldtype": "Data",
   "label": "district",
   "mandatory": 0,
   "wildcard_filter": 0
  },
  {
   "fieldname": "sub_district",
   "fieldtype": "Data",
   "label": "sub_district",
   "mandatory": 0,
   "wildcard_filter": 0
  }
 ],
 "idx": 0,
 "is_standard": "Yes",
 "letterhead": null,
 "modified": "2025-08-14 08:56:34.319323",
 "modified_by": "Administrator",
 "module": "Yemen Red Crescent Society",
 "name": "Villages Map",
 "owner": "Administrator",
 "prepared_report": 0,
 "query": "-- Villages Location (UI Query Report)\n-- Filters: district (optional), sub_district (optional)\n\nSELECT\n    name,\n    villagenameen AS village,\n    sub_district,\n    district,\n    /* Prefer explicit lat/long; else derive from GeoJSON Point */\n    COALESCE(latitude, JSON_EXTRACT(location, '$.coordinates[1]')) AS latitude,\n    COALESCE(longitude, JSON_EXTRACT(location, '$.coordinates[0]')) AS longitude\nFROM `tabVillages`\nWHERE\n    (%(district)s IS NULL OR %(district)s = '' OR district = %(district)s)\n    AND (%(sub_district)s IS NULL OR %(sub_district)s = '' OR sub_district = %(sub_district)s)\n    AND (\n        (latitude IS NOT NULL AND longitude IS NOT NULL)\n        OR (\n            location IS NOT NULL\n            AND JSON_EXTRACT(location, '$.type') = 'Point'\n            AND JSON_EXTRACT(location, '$.coordinates[0]') IS NOT NULL\n            AND JSON_EXTRACT(location, '$.coordinates[1]') IS NOT NULL\n        )\n    )\nORDER BY district, sub_district, village;\n",
 "ref_doctype": "Villages",
 "report_name": "Villages Map",
 "report_type": "Query Report",
 "roles": [
  {
   "role": "System Manager"
  }
 ],
 "timeout": 0
}